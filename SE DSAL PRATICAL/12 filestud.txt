#include<iostream>
#include<fstream>
#include<string.h>
using namespace std;

class Student {
    struct Stud {
        int roll;
        char name[10];
        char div;
        char add[10];
    } rec;

public:
    void create();
    void display();
    void search();
    void deleteRecord();
};

void Student::create() {
    char ans;
    ofstream fout("stud.dat", ios::out | ios::binary);
    do {
        cout << "Enter Roll No: ";
        cin >> rec.roll;
        cout << "Enter Name: ";
        cin >> rec.name;
        cout << "Enter Division: ";
        cin >> rec.div;
        cout << "Enter Address: ";
        cin >> rec.add;
        fout.write((char*)&rec, sizeof(Stud));
        cout << "Do you want to add another record (y/n)? ";
        cin >> ans;
    } while (ans == 'y' || ans == 'Y');
    fout.close();
}

void Student::display() {
    ifstream fin("stud.dat", ios::in | ios::binary);
    cout << "Roll\tName\tDiv\tAddress\n";
    while (fin.read((char*)&rec, sizeof(Stud))) {
        if (rec.roll != -1) {
            cout << rec.roll << "\t" << rec.name << "\t" << rec.div << "\t" << rec.add << endl;
        }
    }
    fin.close();
}

void Student::search() {
    int r;
    ifstream fin("stud.dat", ios::in | ios::binary);
    cout << "Enter Roll No: ";
    cin >> r;
    while (fin.read((char*)&rec, sizeof(Stud))) {
        if (rec.roll == r) {
            cout << "Record Found:\n";
            cout << rec.roll << "\t" << rec.name << "\t" << rec.div << "\t" << rec.add << endl;
            fin.close();
            return;
        }
    }
    cout << "Record Not Found\n";
    fin.close();
}

void Student::deleteRecord() {
    int r;
    fstream f("stud.dat", ios::in | ios::out | ios::binary);
    cout << "Enter Roll No to delete: ";
    cin >> r;
    while (f.read((char*)&rec, sizeof(Stud))) {
        if (rec.roll == r) {
            f.seekp(-sizeof(Stud), ios::cur);
            rec.roll = -1;
            strcpy(rec.name, "NULL");
            rec.div = 'N';
            strcpy(rec.add, "NULL");
            f.write((char*)&rec, sizeof(Stud));
            cout << "Record Deleted\n";
            f.close();
            return;
        }
    }
    cout << "Record Not Found\n";
    f.close();
}

int main() {
    Student obj;
    int choice;
    do {
        cout << "\n1. Create\n2. Display\n3. Delete\n4. Search\n5. Exit\nEnter choice: ";
        cin >> choice;
        switch (choice) {
            case 1: obj.create(); break;
            case 2: obj.display(); break;
            case 3: obj.deleteRecord(); break;
            case 4: obj.search(); break;
        }
    } while (choice != 5);
    return 0;
}
